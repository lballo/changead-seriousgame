<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ADMR Change Lab - Serious Game</title>
  <link href="https://fonts.googleapis.com/css2?family=Raleway:wght@400;600;700;800&family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    :root {
      --primary: #1e3a5f;
      --secondary: #ff6b35;
      --success: #2ecc71;
      --warning: #f39c12;
      --danger: #e74c3c;
      --info: #4a90e2;
      --light: #f8f9fa;
      --dark: #2c3e50;
    }

    body {
      font-family: 'Open Sans', sans-serif;
      background: linear-gradient(135deg, #1e3a5f 0%, #4a90e2 100%);
      min-height: 100vh;
      padding: 15px;
    }

    .container {
      max-width: 1400px;
      margin: 0 auto;
      background: white;
      border-radius: 20px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
      overflow: hidden;
    }

    .header {
      background: linear-gradient(135deg, var(--primary) 0%, #2c5f8d 100%);
      color: white;
      padding: 30px;
      text-align: center;
      position: relative;
      overflow: hidden;
    }

    .header::before {
      content: '';
      position: absolute;
      top: -50%;
      right: -10%;
      width: 400px;
      height: 400px;
      background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
      border-radius: 50%;
    }

    .header h1 {
      font-family: 'Raleway', sans-serif;
      font-size: 2.5em;
      font-weight: 800;
      margin-bottom: 10px;
      position: relative;
    }

    .header p {
      font-size: 1.1em;
      opacity: 0.9;
      position: relative;
    }

    .content {
      padding: 40px;
    }

    /* √âcran de connexion */
    .connect-screen {
      text-align: center;
      max-width: 500px;
      margin: 0 auto;
    }

    .connect-title {
      font-family: 'Raleway', sans-serif;
      font-size: 2em;
      color: var(--primary);
      margin-bottom: 30px;
    }

    .role-badge {
      display: inline-block;
      padding: 8px 20px;
      border-radius: 20px;
      font-weight: 600;
      font-size: 0.9em;
      margin-bottom: 15px;
    }

    .input-group {
      margin: 30px 0;
    }

    .input-group label {
      display: block;
      font-weight: 600;
      margin-bottom: 10px;
      color: var(--dark);
    }

    .input-group input {
      width: 100%;
      padding: 15px;
      border: 2px solid #e0e0e0;
      border-radius: 10px;
      font-size: 1.1em;
      text-align: center;
      letter-spacing: 3px;
      text-transform: uppercase;
      font-weight: 700;
    }

    .input-group input:focus {
      outline: none;
      border-color: var(--info);
    }

    .btn {
      padding: 15px 40px;
      border: none;
      border-radius: 12px;
      font-size: 1.1em;
      font-weight: 700;
      cursor: pointer;
      font-family: 'Raleway', sans-serif;
      transition: all 0.3s ease;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    }

    .btn:hover:not(:disabled) {
      transform: translateY(-3px);
      box-shadow: 0 8px 20px rgba(0,0,0,0.25);
    }

    .btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    .btn-primary {
      background: linear-gradient(135deg, var(--info) 0%, var(--primary) 100%);
      color: white;
    }

    .btn-success {
      background: linear-gradient(135deg, var(--secondary) 0%, #ff8c61 100%);
      color: white;
    }

    .btn-large {
      padding: 20px 50px;
      font-size: 1.3em;
    }

    /* Fiches de r√¥les */
    .role-card {
      background: linear-gradient(135deg, #ffffff 0%, var(--light) 100%);
      border-radius: 20px;
      padding: 40px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.1);
      margin-bottom: 30px;
    }

    .role-header {
      text-align: center;
      margin-bottom: 30px;
      padding-bottom: 20px;
      border-bottom: 3px solid var(--secondary);
    }

    .role-emoji {
      font-size: 4em;
      margin-bottom: 15px;
    }

    .role-name {
      font-family: 'Raleway', sans-serif;
      font-size: 2em;
      font-weight: 800;
      color: var(--primary);
      margin-bottom: 10px;
    }

    .role-description {
      color: #666;
      font-size: 1.1em;
      line-height: 1.6;
    }

    .section {
      margin: 30px 0;
      padding: 25px;
      background: white;
      border-radius: 15px;
      border-left: 5px solid var(--info);
    }

    .section-title {
      font-family: 'Raleway', sans-serif;
      font-size: 1.4em;
      font-weight: 700;
      color: var(--primary);
      margin-bottom: 15px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .section-content {
      color: #555;
      line-height: 1.8;
      font-size: 1.05em;
    }

    .mission-list {
      list-style: none;
      padding: 0;
    }

    .mission-item {
      padding: 15px;
      margin: 10px 0;
      background: var(--light);
      border-radius: 10px;
      border-left: 4px solid var(--success);
      display: flex;
      align-items: flex-start;
      gap: 15px;
    }

    .mission-checkbox {
      width: 24px;
      height: 24px;
      border: 3px solid var(--success);
      border-radius: 6px;
      flex-shrink: 0;
      margin-top: 3px;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .mission-checkbox.checked {
      background: var(--success);
      position: relative;
    }

    .mission-checkbox.checked::after {
      content: '‚úì';
      position: absolute;
      color: white;
      font-weight: bold;
      font-size: 16px;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
    }

    .mission-text {
      flex: 1;
      color: var(--dark);
      line-height: 1.6;
    }

    .quote-box {
      background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
      border-left: 5px solid var(--info);
      padding: 20px;
      border-radius: 12px;
      font-style: italic;
      color: #555;
      position: relative;
      margin: 20px 0;
    }

    .quote-box::before {
      content: '"';
      position: absolute;
      top: -10px;
      left: 15px;
      font-size: 4em;
      color: var(--info);
      opacity: 0.3;
      font-family: Georgia, serif;
    }

    .warning-box {
      background: #fff3e0;
      border-left: 5px solid var(--warning);
      padding: 20px;
      border-radius: 12px;
      margin: 20px 0;
    }

    .warning-box strong {
      color: var(--warning);
      font-size: 1.1em;
    }

    /* Dashboard Animateur */
    .dashboard {
      display: grid;
      grid-template-columns: 2fr 1fr;
      gap: 30px;
    }

    .dashboard-main {
      background: white;
      padding: 30px;
      border-radius: 15px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.08);
    }

    .dashboard-sidebar {
      background: var(--light);
      padding: 25px;
      border-radius: 15px;
    }

    .phase-indicator {
      background: linear-gradient(135deg, var(--info) 0%, var(--primary) 100%);
      color: white;
      padding: 20px;
      border-radius: 12px;
      text-align: center;
      margin-bottom: 30px;
    }

    .phase-number {
      font-size: 3em;
      font-weight: 800;
      font-family: 'Raleway', sans-serif;
    }

    .phase-name {
      font-size: 1.2em;
      margin-top: 10px;
    }

    .timer {
      font-size: 4em;
      font-weight: 800;
      font-family: 'Raleway', sans-serif;
      color: var(--primary);
      text-align: center;
      margin: 30px 0;
    }

    .timer.warning {
      color: var(--warning);
      animation: pulse 1s infinite;
    }

    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }

    .participants-list {
      list-style: none;
      padding: 0;
    }

    .participant-item {
      padding: 12px;
      margin: 8px 0;
      background: white;
      border-radius: 8px;
      display: flex;
      align-items: center;
      gap: 10px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.05);
    }

    .status-dot {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background: var(--success);
    }

    .event-btn {
      width: 100%;
      padding: 15px;
      margin: 10px 0;
      background: white;
      border: 2px solid var(--info);
      border-radius: 10px;
      color: var(--info);
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .event-btn:hover {
      background: var(--info);
      color: white;
    }

    .event-btn.triggered {
      background: var(--success);
      border-color: var(--success);
      color: white;
    }

    /* √âcran central */
    .central-screen {
      background: linear-gradient(135deg, var(--primary) 0%, var(--info) 100%);
      color: white;
      padding: 40px;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    .gauge-container {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 30px;
      margin: 40px 0;
    }

    .gauge {
      background: rgba(255,255,255,0.1);
      backdrop-filter: blur(10px);
      padding: 25px;
      border-radius: 15px;
    }

    .gauge-label {
      font-size: 1.2em;
      font-weight: 700;
      margin-bottom: 15px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .gauge-bar {
      height: 30px;
      background: rgba(255,255,255,0.2);
      border-radius: 15px;
      overflow: hidden;
      position: relative;
    }

    .gauge-fill {
      height: 100%;
      border-radius: 15px;
      transition: width 0.8s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
      overflow: hidden;
    }

    .gauge-fill::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
      animation: shimmer 2s infinite;
    }

    @keyframes shimmer {
      0% { transform: translateX(-100%); }
      100% { transform: translateX(100%); }
    }

    .gauge-value {
      font-size: 2em;
      font-weight: 800;
      text-align: center;
      margin-top: 15px;
      font-family: 'Raleway', sans-serif;
    }

    .vote-results {
      background: rgba(255,255,255,0.1);
      backdrop-filter: blur(10px);
      padding: 30px;
      border-radius: 15px;
      margin: 30px 0;
    }

    .vote-title {
      font-size: 1.5em;
      font-weight: 700;
      margin-bottom: 20px;
    }

    .vote-bar {
      margin: 15px 0;
    }

    .vote-bar-label {
      display: flex;
      justify-content: space-between;
      margin-bottom: 8px;
      font-weight: 600;
    }

    .vote-bar-fill {
      height: 20px;
      background: rgba(255,255,255,0.3);
      border-radius: 10px;
    }

    .vote-bar-inner {
      height: 100%;
      background: var(--success);
      border-radius: 10px;
      transition: width 0.5s ease;
    }

    /* √âcran de vote */
    .vote-screen {
      text-align: center;
      padding: 40px 20px;
    }

    .vote-question {
      font-size: 1.8em;
      font-weight: 700;
      color: var(--primary);
      margin-bottom: 40px;
      font-family: 'Raleway', sans-serif;
    }

    .vote-options {
      display: grid;
      gap: 20px;
      max-width: 600px;
      margin: 0 auto;
    }

    .vote-option {
      padding: 25px;
      background: white;
      border: 3px solid #e0e0e0;
      border-radius: 15px;
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 1.2em;
      font-weight: 600;
    }

    .vote-option:hover {
      border-color: var(--info);
      transform: translateY(-3px);
      box-shadow: 0 8px 20px rgba(74, 144, 226, 0.2);
    }

    .vote-option.selected {
      background: var(--info);
      border-color: var(--info);
      color: white;
    }

    /* Score final */
    .final-score {
      text-align: center;
      padding: 60px 20px;
    }

    .score-circle {
      width: 250px;
      height: 250px;
      margin: 40px auto;
      border-radius: 50%;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      background: linear-gradient(135deg, var(--primary) 0%, var(--info) 100%);
      color: white;
      box-shadow: 0 20px 60px rgba(30, 58, 95, 0.4);
      animation: scaleIn 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    }

    @keyframes scaleIn {
      0% { transform: scale(0) rotate(-180deg); }
      100% { transform: scale(1) rotate(0deg); }
    }

    .score-value {
      font-size: 4.5em;
      font-weight: 800;
      font-family: 'Raleway', sans-serif;
    }

    .score-label {
      font-size: 1.2em;
      opacity: 0.9;
      margin-top: 10px;
    }

    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 25px;
      margin: 50px 0;
    }

    .stat-card {
      background: linear-gradient(135deg, #ffffff 0%, var(--light) 100%);
      padding: 30px;
      border-radius: 15px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.08);
      text-align: center;
    }

    .stat-icon {
      font-size: 3em;
      margin-bottom: 15px;
    }

    .stat-value {
      font-size: 2.5em;
      font-weight: 700;
      color: var(--primary);
      font-family: 'Raleway', sans-serif;
    }

    .stat-label {
      color: #666;
      font-size: 1em;
      margin-top: 10px;
    }

    .score-method {
      background: #e3f2fd;
      padding: 30px;
      border-radius: 15px;
      margin: 40px 0;
      text-align: left;
    }

    .score-method h3 {
      color: var(--primary);
      margin-bottom: 15px;
      font-family: 'Raleway', sans-serif;
    }

    .score-method p {
      color: #555;
      line-height: 1.8;
    }

    /* Responsive */
    @media (max-width: 768px) {
      .dashboard {
        grid-template-columns: 1fr;
      }

      .gauge-container {
        grid-template-columns: 1fr;
      }

      .header h1 {
        font-size: 2em;
      }

      .content {
        padding: 20px;
      }
    }

    /* Animations */
    .fade-in {
      animation: fadeIn 0.5s ease;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .slide-in {
      animation: slideIn 0.4s ease;
    }

    @keyframes slideIn {
      from { opacity: 0; transform: translateX(-20px); }
      to { opacity: 1; transform: translateX(0); }
    }

    /* Utilitaires */
    .text-center { text-align: center; }
    .mb-2 { margin-bottom: 20px; }
    .mb-3 { margin-bottom: 30px; }
    .mt-3 { margin-top: 30px; }
    .font-bold { font-weight: 700; }
  </style>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect, useRef } = React;

    // Donn√©es du jeu
    const ROLES = {
      MANAGER: {
        id: 'MANAGER',
        name: 'Manager de Transition',
        emoji: 'üëî',
        color: '#1e3a5f',
        count: 2
      },
      AVOCAT: {
        id: 'AVOCAT',
        name: 'Avocat du changement',
        emoji: 'üü¢',
        color: '#2ecc71'
      },
      RELAIS: {
        id: 'RELAIS',
        name: 'Relais',
        emoji: 'üîµ',
        color: '#4a90e2'
      },
      PARTAGE: {
        id: 'PARTAGE',
        name: 'Partag√©',
        emoji: 'üü°',
        color: '#f39c12'
      },
      NON_CONCERNE: {
        id: 'NON_CONCERNE',
        name: 'Non-concern√©',
        emoji: '‚ö™',
        color: '#95a5a6'
      },
      PASSIF: {
        id: 'PASSIF',
        name: 'Passif-Opportuniste',
        emoji: 'üü†',
        color: '#ff9933'
      },
      OPPOSANT: {
        id: 'OPPOSANT',
        name: 'Opposant',
        emoji: 'üî¥',
        color: '#e74c3c'
      },
      DETRACTEUR: {
        id: 'DETRACTEUR',
        name: 'D√©tracteur',
        emoji: '‚ö´',
        color: '#2c3e50'
      }
    };

    const EVENTS = [
      {
        id: 1,
        title: "Bug majeur de l'ancien syst√®me",
        description: "L'ancien outil vient de perdre des donn√©es de planning. Urgence !",
        impact: { confiance: 0, avancement: 15, resistance: -10 }
      },
      {
        id: 2,
        title: "Budget formation augment√©",
        description: "La direction d√©bloque +30% de budget pour l'accompagnement",
        impact: { confiance: 15, avancement: 10, resistance: 0 }
      },
      {
        id: 3,
        title: "√âchec d'une ADMR voisine",
        description: "Article : une ADMR voisine a √©chou√© sa transition d'outil",
        impact: { confiance: -10, avancement: 0, resistance: 20 }
      },
      {
        id: 4,
        title: "T√©moignage positif",
        description: "Vid√©o : une asso similaire partage son succ√®s avec ce m√™me outil",
        impact: { confiance: 15, avancement: 0, resistance: -10 }
      },
      {
        id: 5,
        title: "Calendrier acc√©l√©r√©",
        description: "La f√©d√©ration impose un calendrier acc√©l√©r√© de 2 mois",
        impact: { confiance: 0, avancement: 0, resistance: 10 }
      },
      {
        id: 6,
        title: "Accompagnement renforc√©",
        description: "Proposition : 1 coach d√©di√© pendant 6 mois pour l'√©quipe",
        impact: { confiance: 10, avancement: 0, resistance: -15 }
      }
    ];

    function App() {
      const [view, setView] = useState('home'); // home, animator, participant, central
      const [sessionCode, setSessionCode] = useState('');
      const [participantName, setParticipantName] = useState('');
      const [role, setRole] = useState(null);
      const [phase, setPhase] = useState(0);
      const [gauges, setGauges] = useState({ confiance: 50, avancement: 30, resistance: 50 });
      const [missions, setMissions] = useState([]);
      const [timeRemaining, setTimeRemaining] = useState(0);
      const [participants, setParticipants] = useState([]);
      const [triggeredEvents, setTriggeredEvents] = useState([]);
      const [votes, setVotes] = useState({});
      const [showVote, setShowVote] = useState(false);
      const [currentVote, setCurrentVote] = useState(null);
      const [selectedVote, setSelectedVote] = useState(null);

      const generateSessionCode = () => {
        const code = Math.random().toString(36).substring(2, 8).toUpperCase();
        setSessionCode(code);
      };

      const startAsAnimator = () => {
        generateSessionCode();
        setView('animator');
        setPhase(0);
      };

      const joinAsParticipant = () => {
        if (!sessionCode || !participantName) return;
        
        // Distribution al√©atoire des r√¥les
        const availableRoles = [
          'MANAGER', 'MANAGER',
          'AVOCAT', 'RELAIS', 'PARTAGE', 
          'NON_CONCERNE', 'PASSIF', 'OPPOSANT'
        ];
        const randomRole = availableRoles[Math.floor(Math.random() * availableRoles.length)];
        setRole(randomRole);
        
        // Initialiser les missions
        const roleMissions = getRoleMissions(randomRole);
        setMissions(roleMissions.map(m => ({ ...m, completed: false })));
        
        setView('participant');
      };

      const joinAsCentralScreen = () => {
        if (!sessionCode) return;
        setView('central');
      };

      const getRoleMissions = (roleId) => {
        switch(roleId) {
          case 'MANAGER':
            return [
              { id: 1, text: "Identifier les typologies d'acteurs pr√©sentes (sans conna√Ætre qui est qui)" },
              { id: 2, text: "Obtenir au moins 60% de votes favorables au vote final" },
              { id: 3, text: "Convaincre au moins 1 partag√© ou passif-opportuniste" },
              { id: 4, text: "Cr√©er une alliance avec les Relais" }
            ];
          case 'AVOCAT':
            return [
              { id: 1, text: "Convaincre au moins 2 personnes de passer d'ind√©cis √† favorable" },
              { id: 2, text: "Proposer une action concr√®te pour acc√©l√©rer le projet (en r√©union)" },
              { id: 3, text: "Emp√™cher les d√©tracteurs de faire √©chouer le projet : contrer leurs arguments n√©gatifs" }
            ];
          case 'RELAIS':
            return [
              { id: 1, text: "Donner au moins un argument en faveur de l'outil (en pl√©ni√®re)" },
              { id: 2, text: "Poser 3 questions de clarification aux managers" },
              { id: 3, text: "Se positionner en acteur cl√© du changement : √™tre sollicit√© par les managers" }
            ];
          case 'PARTAGE':
            return [
              { id: 1, text: "Obtenir 3 r√©ponses concr√®tes √† vos inqui√©tudes" },
              { id: 2, text: "Changer de position au moins 1 fois pendant le jeu" },
              { id: 3, text: "Poser une question sur l'impact concret de votre travail quotidien" }
            ];
          case 'NON_CONCERNE':
            return [
              { id: 1, text: "Rester en retrait pendant les 10 premi√®res minutes (parler <30 secondes)" },
              { id: 2, text: "Vous engager SI on vous donne un r√¥le : accepter si sollicit√©" },
              { id: 3, text: "Poser une question sur 'en quoi √ßa me concerne vraiment ?'" }
            ];
          case 'PASSIF':
            return [
              { id: 1, text: "Identifier les int√©r√™ts possibles pour vous : trouver au moins 2 avantages personnels" },
              { id: 2, text: "Vous rallier au camp majoritaire lors du dernier vote" },
              { id: 3, text: "N√©gocier un avantage personnel (formation, mat√©riel, horaires...)" }
            ];
          case 'OPPOSANT':
            return [
              { id: 1, text: "Exprimer votre manque de confiance dans votre capacit√© √† vous adapter et v√©rifier que l'outil est simple" },
              { id: 2, text: "Faire remonter 3 risques concrets du projet en pl√©ni√®re" },
              { id: 3, text: "Menacer de faire appel aux syndicats car vous avez peur de vous faire licencier" }
            ];
          case 'DETRACTEUR':
            return [
              { id: 1, text: "Discr√©diter la direction au moins 2 fois (en public ou priv√©)" },
              { id: 2, text: "Trouver au moins 2 arguments contre le changement et les exprimer" },
              { id: 3, text: "Ne jamais vous rallier : rester oppos√© jusqu'au bout" }
            ];
          default:
            return [];
        }
      };

      const toggleMission = (missionId) => {
        setMissions(missions.map(m => 
          m.id === missionId ? { ...m, completed: !m.completed } : m
        ));
      };

      const triggerEvent = (eventId) => {
        if (triggeredEvents.includes(eventId)) return;
        
        const event = EVENTS.find(e => e.id === eventId);
        if (event) {
          setGauges({
            confiance: Math.max(0, Math.min(100, gauges.confiance + event.impact.confiance)),
            avancement: Math.max(0, Math.min(100, gauges.avancement + event.impact.avancement)),
            resistance: Math.max(0, Math.min(100, gauges.resistance + event.impact.resistance))
          });
          setTriggeredEvents([...triggeredEvents, eventId]);
        }
      };

      const startPhase = (phaseNumber, duration) => {
        setPhase(phaseNumber);
        setTimeRemaining(duration);
      };

      useEffect(() => {
        if (timeRemaining > 0) {
          const timer = setTimeout(() => {
            setTimeRemaining(timeRemaining - 1);
          }, 1000);
          return () => clearTimeout(timer);
        }
      }, [timeRemaining]);

      const formatTime = (seconds) => {
        const mins = Math.floor(seconds / 60);
        const secs = seconds % 60;
        return `${mins}:${secs.toString().padStart(2, '0')}`;
      };

      const calculateFinalScore = () => {
        return Math.round(
          (gauges.confiance * 0.4) +
          (gauges.avancement * 0.3) +
          ((100 - gauges.resistance) * 0.3)
        );
      };

      // √âcran d'accueil
      if (view === 'home') {
        return (
          <div className="container fade-in">
            <div className="header">
              <h1>üéÆ ADMR CHANGE LAB</h1>
              <p>Simulation hybride de gestion du changement</p>
            </div>
            <div className="content">
              <div className="connect-screen">
                <h2 className="connect-title">Bienvenue</h2>
                <p style={{ color: '#666', marginBottom: '40px', lineHeight: '1.6' }}>
                  Choisissez votre r√¥le pour cette session de formation
                </p>

                <div style={{ display: 'grid', gap: '20px', marginBottom: '40px' }}>
                  <button className="btn btn-primary btn-large" onClick={startAsAnimator}>
                    üë®‚Äçüè´ Je suis l'animateur
                  </button>
                  
                  <div style={{ padding: '30px', background: 'var(--light)', borderRadius: '15px' }}>
                    <h3 style={{ marginBottom: '20px', color: 'var(--primary)' }}>üë§ Je suis participant</h3>
                    <div className="input-group">
                      <label>Code de session</label>
                      <input
                        type="text"
                        placeholder="Ex: ABC123"
                        value={sessionCode}
                        onChange={(e) => setSessionCode(e.target.value.toUpperCase())}
                        maxLength={6}
                      />
                    </div>
                    <div className="input-group">
                      <label>Votre pr√©nom</label>
                      <input
                        type="text"
                        placeholder="Entrez votre pr√©nom"
                        value={participantName}
                        onChange={(e) => setParticipantName(e.target.value)}
                        style={{ letterSpacing: 'normal', textTransform: 'none' }}
                      />
                    </div>
                    <button 
                      className="btn btn-success" 
                      style={{ width: '100%' }}
                      onClick={joinAsParticipant}
                      disabled={!sessionCode || !participantName}
                    >
                      Rejoindre la session
                    </button>
                  </div>

                  <div style={{ padding: '30px', background: 'var(--light)', borderRadius: '15px' }}>
                    <h3 style={{ marginBottom: '20px', color: 'var(--primary)' }}>üì∫ √âcran central</h3>
                    <div className="input-group">
                      <label>Code de session</label>
                      <input
                        type="text"
                        placeholder="Ex: ABC123"
                        value={sessionCode}
                        onChange={(e) => setSessionCode(e.target.value.toUpperCase())}
                        maxLength={6}
                      />
                    </div>
                    <button 
                      className="btn btn-primary" 
                      style={{ width: '100%' }}
                      onClick={joinAsCentralScreen}
                      disabled={!sessionCode}
                    >
                      Afficher l'√©cran central
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        );
      }

      // Interface Animateur
      if (view === 'animator') {
        return (
          <div className="container fade-in">
            <div className="header">
              <h1>üéõÔ∏è Dashboard Animateur</h1>
              <p>Session : <strong>{sessionCode}</strong></p>
            </div>
            <div className="content">
              <div className="dashboard">
                <div className="dashboard-main">
                  <div className="phase-indicator">
                    <div className="phase-number">{phase}/5</div>
                    <div className="phase-name">
                      {phase === 0 && "Briefing"}
                      {phase === 1 && "R√©union d'annonce"}
                      {phase === 2 && "N√©gociations"}
                      {phase === 3 && "Comit√© de pilotage"}
                      {phase === 4 && "R√©solution"}
                      {phase === 5 && "Debrief"}
                    </div>
                  </div>

                  <div className="timer">{formatTime(timeRemaining)}</div>

                  <div style={{ display: 'grid', gap: '15px' }}>
                    <button className="btn btn-primary" onClick={() => startPhase(0, 600)}>
                      Phase 0 : Briefing (10 min)
                    </button>
                    <button className="btn btn-primary" onClick={() => startPhase(1, 900)}>
                      Phase 1 : R√©union d'annonce (15 min)
                    </button>
                    <button className="btn btn-primary" onClick={() => startPhase(2, 1500)}>
                      Phase 2 : N√©gociations (25 min)
                    </button>
                    <button className="btn btn-primary" onClick={() => startPhase(3, 1200)}>
                      Phase 3 : Comit√© (20 min)
                    </button>
                    <button className="btn btn-primary" onClick={() => startPhase(4, 300)}>
                      Phase 4 : R√©solution (5 min)
                    </button>
                    <button className="btn btn-primary" onClick={() => startPhase(5, 1200)}>
                      Phase 5 : Debrief (20 min)
                    </button>
                  </div>

                  <div style={{ marginTop: '40px' }}>
                    <h3 style={{ marginBottom: '20px', color: 'var(--primary)' }}>üìä Jauges actuelles</h3>
                    <div className="gauge-container" style={{ gridTemplateColumns: '1fr' }}>
                      <div>
                        <div style={{ marginBottom: '10px', fontWeight: '600' }}>üíö Confiance : {gauges.confiance}%</div>
                        <div style={{ height: '20px', background: '#e0e0e0', borderRadius: '10px', overflow: 'hidden' }}>
                          <div style={{ height: '100%', width: `${gauges.confiance}%`, background: 'var(--success)', transition: 'width 0.5s' }}></div>
                        </div>
                      </div>
                      <div>
                        <div style={{ marginBottom: '10px', fontWeight: '600' }}>üìà Avancement : {gauges.avancement}%</div>
                        <div style={{ height: '20px', background: '#e0e0e0', borderRadius: '10px', overflow: 'hidden' }}>
                          <div style={{ height: '100%', width: `${gauges.avancement}%`, background: 'var(--info)', transition: 'width 0.5s' }}></div>
                        </div>
                      </div>
                      <div>
                        <div style={{ marginBottom: '10px', fontWeight: '600' }}>‚ö†Ô∏è R√©sistance : {gauges.resistance}%</div>
                        <div style={{ height: '20px', background: '#e0e0e0', borderRadius: '10px', overflow: 'hidden' }}>
                          <div style={{ height: '100%', width: `${gauges.resistance}%`, background: 'var(--danger)', transition: 'width 0.5s' }}></div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <div className="dashboard-sidebar">
                  <h3 style={{ marginBottom: '20px', color: 'var(--primary)' }}>üé≤ √âv√©nements</h3>
                  {EVENTS.map(event => (
                    <button
                      key={event.id}
                      className={`event-btn ${triggeredEvents.includes(event.id) ? 'triggered' : ''}`}
                      onClick={() => triggerEvent(event.id)}
                      disabled={triggeredEvents.includes(event.id)}
                    >
                      {triggeredEvents.includes(event.id) ? '‚úì ' : ''}{event.title}
                    </button>
                  ))}
                </div>
              </div>
            </div>
          </div>
        );
      }

      // Interface Participant
      if (view === 'participant') {
        const roleData = ROLES[role];
        
        return (
          <div className="container fade-in">
            <div className="header">
              <h1>üé≠ Votre R√¥le</h1>
              <p>{participantName} ‚Ä¢ Session {sessionCode}</p>
            </div>
            <div className="content">
              <RoleCard role={role} missions={missions} toggleMission={toggleMission} />
            </div>
          </div>
        );
      }

      // √âcran Central
      if (view === 'central') {
        return (
          <div className="central-screen">
            <div style={{ textAlign: 'center', marginBottom: '40px' }}>
              <h1 style={{ fontSize: '3em', fontFamily: 'Raleway', fontWeight: '800', marginBottom: '10px' }}>
                ADMR CHANGE LAB
              </h1>
              <p style={{ fontSize: '1.5em', opacity: '0.9' }}>
                Session {sessionCode} ‚Ä¢ Phase {phase}/5
              </p>
            </div>

            <div className="timer" style={{ color: 'white', fontSize: '5em' }}>
              {formatTime(timeRemaining)}
            </div>

            <div className="gauge-container">
              <div className="gauge">
                <div className="gauge-label">üíö Confiance</div>
                <div className="gauge-bar">
                  <div className="gauge-fill" style={{ width: `${gauges.confiance}%`, background: 'var(--success)' }}></div>
                </div>
                <div className="gauge-value">{gauges.confiance}%</div>
              </div>
              <div className="gauge">
                <div className="gauge-label">üìà Avancement</div>
                <div className="gauge-bar">
                  <div className="gauge-fill" style={{ width: `${gauges.avancement}%`, background: 'var(--info)' }}></div>
                </div>
                <div className="gauge-value">{gauges.avancement}%</div>
              </div>
              <div className="gauge">
                <div className="gauge-label">‚ö†Ô∏è R√©sistance</div>
                <div className="gauge-bar">
                  <div className="gauge-fill" style={{ width: `${gauges.resistance}%`, background: 'var(--danger)' }}></div>
                </div>
                <div className="gauge-value">{gauges.resistance}%</div>
              </div>
            </div>

            {triggeredEvents.length > 0 && (
              <div className="vote-results">
                <div className="vote-title">üì¢ Dernier √©v√©nement</div>
                <p style={{ fontSize: '1.2em', opacity: '0.9' }}>
                  {EVENTS.find(e => e.id === triggeredEvents[triggeredEvents.length - 1])?.description}
                </p>
              </div>
            )}
          </div>
        );
      }

      return null;
    }

    // Composant Carte de R√¥le
    function RoleCard({ role, missions, toggleMission }) {
      const roleData = ROLES[role];

      const getRoleContent = () => {
        switch(role) {
          case 'MANAGER':
            return (
              <>
                <div className="section">
                  <div className="section-title">üéØ Votre mission principale</div>
                  <div className="section-content">
                    <p style={{ marginBottom: '15px' }}>
                      Vous √™tes Manager de Transition. Vous devez piloter ce changement avec succ√®s en :
                    </p>
                    <ul style={{ marginLeft: '20px', lineHeight: '1.8' }}>
                      <li>Ralliant les mitig√©s et passifs-opportunistes</li>
                      <li>R√©pondant aux craintes et rassurant</li>
                      <li>Identifiant les relais sur lesquels vous appuyer</li>
                      <li>Expliquant les raisons du changement et les √©tapes</li>
                    </ul>
                  </div>
                </div>

                <div className="warning-box">
                  <strong>‚ö†Ô∏è Contrainte importante :</strong>
                  <p style={{ marginTop: '10px', lineHeight: '1.6' }}>
                    Vous disposez d'un <strong>budget limit√©</strong> : seulement 20 000‚Ç¨ pour la formation et l'accompagnement de toute l'√©quipe.
                    Vous devez faire des choix strat√©giques sur les investissements.
                  </p>
                </div>

                <div className="section">
                  <div className="section-title">üìã M√©thode SCORE pour annoncer le changement</div>
                  <div className="section-content">
                    <h4 style={{ color: 'var(--primary)', marginTop: '20px', marginBottom: '10px' }}>
                      S - Situation (partir du r√©el)
                    </h4>
                    <p style={{ marginBottom: '15px' }}>
                      "Aujourd'hui, notre gestion des plannings et donn√©es RH montre ses limites : plannings qui changent en urgence, 
                      informations dispers√©es, charge administrative importante, vision peu claire. Les situations humaines sont plus complexes 
                      et les exigences r√©glementaires augmentent."
                    </p>

                    <h4 style={{ color: 'var(--primary)', marginTop: '20px', marginBottom: '10px' }}>
                      C - Causes (expliquer pourquoi)
                    </h4>
                    <p style={{ marginBottom: '15px' }}>
                      "Ce n'est pas li√© √† un manque d'implication. C'est d√ª √† : l'√©volution du nombre de b√©n√©ficiaires et salari√©s, 
                      la multiplication des contraintes r√©glementaires, des outils actuels inadapt√©s au volume d'activit√©, 
                      et des modes de fonctionnement construits progressivement sans harmonisation."
                    </p>

                    <h4 style={{ color: 'var(--primary)', marginTop: '20px', marginBottom: '10px' }}>
                      O - Objectifs (dire o√π l'on va)
                    </h4>
                    <p style={{ marginBottom: '15px' }}>
                      <strong>Court terme :</strong> S√©curiser les plannings, r√©duire les erreurs, soulager la charge administrative.<br/>
                      <strong>Moyen terme :</strong> Gagner en lisibilit√©, faciliter le partage d'informations, am√©liorer la coordination.<br/>
                      <strong>Long terme :</strong> Outil fiable et commun, soutien √† la qualit√© de vie au travail, focus sur le c≈ìur de mission.
                    </p>

                    <h4 style={{ color: 'var(--primary)', marginTop: '20px', marginBottom: '10px' }}>
                      R - Ressources (rassurer sur les moyens)
                    </h4>
                    <p style={{ marginBottom: '15px' }}>
                      "Moyens concrets : temps de formation d√©di√©s, accompagnement des responsables, phase de prise en main progressive, 
                      r√©f√©rents identifi√©s, appui RH et technique. Il ne s'agit pas de faire plus, mais de donner des outils mieux adapt√©s."
                    </p>

                    <h4 style={{ color: 'var(--primary)', marginTop: '20px', marginBottom: '10px' }}>
                      E - Effets (dire ce que √ßa change)
                    </h4>
                    <p>
                      "Concr√®tement : plannings plus stables, r√©duction des urgences, meilleure visibilit√© pour les salari√©s, 
                      communication plus fluide, diminution de la charge mentale administrative. L'objectif est d'am√©liorer le quotidien."
                    </p>
                  </div>
                </div>

                <div className="section">
                  <div className="section-title">üé¨ Structure de votre intervention</div>
                  <div className="section-content">
                    <p style={{ marginBottom: '15px', fontWeight: '600' }}>
                      Avant de commencer, d√©finissez et annoncez le cadre :
                    </p>
                    <ol style={{ marginLeft: '20px', lineHeight: '1.8' }}>
                      <li><strong>Phase 1 - Exposition :</strong> Vous pr√©sentez le changement (dur√©e √† d√©finir)</li>
                      <li><strong>Phase 2 - Questions/R√©ponses :</strong> Vous ouvrez le dialogue (dur√©e √† d√©finir)</li>
                    </ol>
                    <p style={{ marginTop: '15px', fontStyle: 'italic', color: '#666' }}>
                      üí° Conseil : Sortez de la pi√®ce avec votre bin√¥me pour vous mettre d'accord sur votre strat√©gie avant de commencer.
                    </p>
                  </div>
                </div>
              </>
            );

          case 'AVOCAT':
            return (
              <>
                <div className="section">
                  <div className="section-title">üß† Votre psychologie</div>
                  <div className="section-content">
                    <p>
                      Vous √™tes <strong>enthousiaste et impatient</strong>. Vous voulez montrer que dans un monde changeant, 
                      le changement est n√©cessaire. Vous avez une intention cach√©e : vous montrer indispensable et √™tre bien vu de la direction.
                    </p>
                  </div>
                </div>

                <div className="section">
                  <div className="section-title">üò§ Votre frustration actuelle</div>
                  <div className="section-content">
                    <p>
                      L'outil actuel vous fait perdre un temps fou : vous devez <strong>resaisir les m√™mes donn√©es au moins 5 fois</strong> ! 
                      Ce n'est plus tenable. Ce changement est une aubaine pour vous.
                    </p>
                  </div>
                </div>

                <div className="quote-box">
                  üí¨ "Franchement, c'est une super opportunit√© ! On perd du temps √† d√©battre."
                </div>

                <div className="warning-box">
                  <strong>‚ö†Ô∏è Attention :</strong> Votre enthousiasme peut √©craser les autres. 
                  Restez attentif √† ne pas minimiser les inqui√©tudes l√©gitimes.
                </div>
              </>
            );

          case 'RELAIS':
            return (
              <>
                <div className="section">
                  <div className="section-title">üß† Votre psychologie</div>
                  <div className="section-content">
                    <p>
                      Vous √™tes <strong>respect√© par les √©quipes</strong> et <strong>adepte au changement</strong>. 
                      Vous aimez vous renseigner sur les nouveaux outils et √™tes curieux des innovations. 
                      Vous n'avez pas besoin d'√™tre convaincu : vous √™tes d√©j√† favorable au projet !
                    </p>
                  </div>
                </div>

                <div className="section">
                  <div className="section-title">üéØ Votre ambition</div>
                  <div className="section-content">
                    <p>
                      Vous voulez <strong>montrer aux managers que vous pouvez √™tre un acteur cl√©</strong> du changement. 
                      C'est l'occasion pour vous de vous positionner comme un <strong>leader d'opinion</strong> 
                      et de valoriser votre expertise aupr√®s de la direction.
                    </p>
                  </div>
                </div>

                <div className="quote-box">
                  üí¨ "Je peux aider √† expliquer aux √©quipes. Je suis convaincu que c'est la bonne direction."
                </div>

                <div className="warning-box">
                  <strong>üí° Votre force :</strong> Vous √™tes la cl√© du changement car vous combinez 
                  la cr√©dibilit√© aupr√®s des √©quipes ET l'adh√©sion au projet. Les managers ont besoin de vous !
                </div>
              </>
            );

          case 'PARTAGE':
            return (
              <>
                <div className="section">
                  <div className="section-title">üß† Votre psychologie</div>
                  <div className="section-content">
                    <p>
                      Vous avez une <strong>posture ambigu√´</strong>. Vous n'√™tes pas contre le changement, 
                      mais vous avez <strong>peur de ne pas r√©ussir √† vous adapter</strong> et de perdre votre l√©gitimit√©.
                    </p>
                  </div>
                </div>

                <div className="section">
                  <div className="section-title">üò∞ Vos craintes</div>
                  <div className="section-content">
                    <p>
                      Vous √™tes <strong>proche de la retraite</strong>. Cela fait <strong>10 ans</strong> que vous vous √™tes habitu√© 
                      √† l'ancien logiciel. Recommencer √† z√©ro vous angoisse. Cela dit, vous admettez que le logiciel actuel 
                      m√©rite d'√™tre chang√©.
                    </p>
                  </div>
                </div>

                <div className="quote-box">
                  üí¨ "Sur le principe, oui‚Ä¶ mais concr√®tement, comment on fait ?"
                </div>

                <div className="warning-box">
                  <strong>üí° Votre √©volution :</strong> Vous pouvez basculer d'un c√¥t√© ou de l'autre selon 
                  les garanties et le soutien concret que vous obtiendrez.
                </div>
              </>
            );

          case 'NON_CONCERNE':
            return (
              <>
                <div className="section">
                  <div className="section-title">üß† Votre psychologie</div>
                  <div className="section-content">
                    <p>
                      Vous vous sentez <strong>peu impact√© et peu engag√©</strong>. Ce changement ne vous semble pas vraiment 
                      vous concerner. Vous restez en retrait, observateur.
                    </p>
                  </div>
                </div>

                <div className="quote-box">
                  üí¨ "Honn√™tement, √ßa ne me concerne pas vraiment."
                </div>

                <div className="warning-box">
                  <strong>‚ö†Ô∏è Attention :</strong> Si vous √™tes n√©glig√©, vous pourriez devenir r√©sistant. 
                  Mais si on vous sollicite avec un r√¥le pr√©cis, vous pouvez vous engager.
                </div>
              </>
            );

          case 'PASSIF':
            return (
              <>
                <div className="section">
                  <div className="section-title">üß† Votre psychologie</div>
                  <div className="section-content">
                    <p>
                      Vous <strong>attendez de voir</strong> comment les choses √©voluent. 
                      Vous vous adapterez si √ßa vous arrange. Vous n'√™tes pas fiable dans la dur√©e, 
                      mais vous savez identifier vos int√©r√™ts.
                    </p>
                  </div>
                </div>

                <div className="quote-box">
                  üí¨ "On verra bien‚Ä¶ si √ßa me simplifie la vie, pourquoi pas."
                </div>

                <div className="warning-box">
                  <strong>üí° Votre strat√©gie :</strong> Vous cherchez les avantages personnels que vous pourriez 
                  tirer de ce changement. Vous vous rallierez au camp gagnant.
                </div>
              </>
            );

          case 'OPPOSANT':
            return (
              <>
                <div className="section">
                  <div className="section-title">üß† Votre psychologie</div>
                  <div className="section-content">
                    <p>
                      Vous <strong>manquez de confiance</strong> dans votre capacit√© √† vous adapter au nouvel outil. 
                      Vous voulez v√©rifier qu'il est simple √† utiliser et que la direction a pr√©vu les ressources n√©cessaires.
                    </p>
                  </div>
                </div>

                <div className="section">
                  <div className="section-title">üò® Votre peur profonde</div>
                  <div className="section-content">
                    <p>
                      Vous avez <strong>peur de vous faire licencier</strong> si vous ne ma√Ætrisez pas le nouvel outil. 
                      Cette crainte est si forte que vous √™tes pr√™t √† menacer de faire appel aux syndicats.
                    </p>
                  </div>
                </div>

                <div className="quote-box">
                  üí¨ "On a d√©j√† essay√©, √ßa n'a jamais march√©."
                </div>

                <div className="warning-box">
                  <strong>üí° Votre potentiel :</strong> Si vos craintes sont vraiment entendues et adress√©es, 
                  vous pouvez devenir un alli√© pr√©cieux gr√¢ce √† votre exp√©rience.
                </div>
              </>
            );

          case 'DETRACTEUR':
            return (
              <>
                <div className="section">
                  <div className="section-title">üß† Votre psychologie</div>
                  <div className="section-content">
                    <p>
                      Vous √™tes <strong>virulent et critique ouvertement</strong>. Vous disqualifiez la direction et 
                      nourrissez les tensions. Vous √™tes tr√®s √©nergivore pour les managers.
                    </p>
                  </div>
                </div>

                <div className="section">
                  <div className="section-title">‚úä Votre position syndicale</div>
                  <div className="section-content">
                    <p>
                      <strong>Information importante :</strong> Vous faites partie des <strong>syndicats</strong>. 
                      Cette position vous donne une l√©gitimit√© pour contester et mobiliser d'autres collaborateurs.
                    </p>
                  </div>
                </div>

                <div className="quote-box">
                  üí¨ "C'est encore une d√©cision hors sol."
                </div>

                <div className="warning-box">
                  <strong>‚ö†Ô∏è Votre r√¥le :</strong> Vous ne devez jamais vous rallier, sauf si des arguments 
                  TR√àS solides vous convainquent (ce qui est peu probable). Restez critique jusqu'au bout.
                </div>
              </>
            );

          default:
            return null;
        }
      };

      return (
        <div className="role-card slide-in">
          <div className="role-header">
            <div className="role-emoji">{roleData.emoji}</div>
            <h2 className="role-name">{roleData.name}</h2>
          </div>

          {getRoleContent()}

          <div className="section">
            <div className="section-title">üéØ Vos missions secr√®tes</div>
            <div className="section-content">
              <p style={{ marginBottom: '20px', color: '#666' }}>
                Accomplissez ces missions pour r√©ussir votre r√¥le. Cochez-les au fur et √† mesure.
              </p>
              <ul className="mission-list">
                {missions.map(mission => (
                  <li key={mission.id} className="mission-item">
                    <div
                      className={`mission-checkbox ${mission.completed ? 'checked' : ''}`}
                      onClick={() => toggleMission(mission.id)}
                    ></div>
                    <div className="mission-text">{mission.text}</div>
                  </li>
                ))}
              </ul>
            </div>
          </div>

          <div style={{ marginTop: '30px', padding: '20px', background: 'var(--light)', borderRadius: '12px', textAlign: 'center' }}>
            <p style={{ color: '#666', marginBottom: '10px' }}>
              Missions accomplies : <strong>{missions.filter(m => m.completed).length}/{missions.length}</strong>
            </p>
            <div style={{ height: '10px', background: '#e0e0e0', borderRadius: '5px', overflow: 'hidden' }}>
              <div style={{
                height: '100%',
                width: `${(missions.filter(m => m.completed).length / missions.length) * 100}%`,
                background: 'var(--success)',
                transition: 'width 0.5s ease'
              }}></div>
            </div>
          </div>
        </div>
      );
    }

    // Rendu de l'application
    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<App />);
  </script>
</body>
</html>
